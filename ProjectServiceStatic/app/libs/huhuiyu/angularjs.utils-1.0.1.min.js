angular.module("angularjs.utils",["ngSanitize"]),angular.module("angularjs.utils").config(["$httpProvider",function(e){e.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8";var d=function(e){var t,n,r,i,a,o,c="";for(t in e)if((n=e[t])instanceof Array)for(o=0;o<n.length;o++)i=n[o],(a={})[t+"["+o+"]"]=i,c+=d(a)+"&";else if(n instanceof Object)for(r in n)i=n[r],(a={})[t+"."+r]=i,c+=d(a)+"&";else null!=n&&(c+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&");var u=c;return c.length&&(u=c.substr(0,c.length-1)),u};e.defaults.transformRequest=[function(e){var t=e;return angular.isObject(e)&&"[object File]"!==String(e)&&(t=d(e)),t}]}]),angular.module("angularjs.utils").factory("MyDataService",["$log","$http","MyLocalDataService",function(c,u,d){c.info("MyDataService init...");var f="error.local.info",l={success:!1,message:"请检查网络状态",code:404},s={dataServer:"",before:angular.noop,after:angular.noop,beforeFile:angular.noop,afterFile:angular.noop,isJson:function(e){return e&&"object"==typeof e&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&!e.length},jsonToFlat:function(e,t,n){for(key in n||(n={}),e){var r=t&&0<t.length?t+"."+key:key,i=e[key];i&&(s.isJson(i)?s.jsonToFlat(i,r,n):(n[r]=i,c.debug(r,i)))}return n},setDataServer:function(e){s.dataServer=e},getDataServer:function(){return s.dataServer},getServerUrl:function(e){return s.dataServer+e},setBefore:function(e){s.before=e},setAfter:function(e){s.after=e},setBeforeFile:function(e){s.beforeFile=e},setAfterFile:function(e){s.afterFile=e},send:function(e,t,r){t||(t={}),(s.before||angular.noop)(e,t),c.debug("发送数据参数：",e,t),u({method:"POST",url:s.dataServer+e,data:t}).then(function(e,t){c.debug(e,t);var n=(s.after||angular.noop)(e);c.debug("after的返回值：",n),"break"!=n&&(r||angular.noop)(e.data)},function(e,t){c.error("处理数据发生错误:",e,t),(r||angular.noop)(l)})},sendFile:function(e,t,n,r){n||(n={}),(s.beforeFile||angular.noop)(e,t,n),c.debug("文件上传参数：url===>",e,",files===>",t,",postdata===>",n);var i=new FormData;for(key in n=s.jsonToFlat(n,""))i.append(key,n[key]);for(key in t)for(var a=t[key],o=0;o<a.length;o++)i.append(key,a[o]);u({method:"POST",url:s.dataServer+e,data:i,headers:{"Content-Type":void 0},transformRequest:angular.identity}).then(function(e,t){c.debug(e,t);var n=(s.afterFile||angular.noop)(e);c.debug("after的返回值：",n),"break"!=n&&(r||angular.noop)(e.data)},function(e,t){c.error("处理数据发生错误:",e,t),d.putJson(f,{data:e,status:t}),(r||angular.noop)(l)})},loadLastError:function(){return d.getJson(f)},get:function(e,n){u({method:"GET",url:e}).then(function(e,t){c.info(e,"====>",t),(n||angular.noop)(null,e.data)},function(e,t){c.error(e,t),(n||angular.noop)(e,null)})},post:function(e,t,n){u({method:"POST",url:e,data:t}).then(function(e,t){c.debug(e,t),(n||angular.noop)(null,e.data)},function(e,t){c.error(e,t),(n||angular.noop)(e,null)})}};return s}]),function(){angular.module("angularjs.utils").factory("MyDateService",["$log",function(e){e.info("MyDateService init...");var t={formatDate:function(e,t){var n=new Date;e&&n.setTime(e),t||(t="y-M-d h:m:s");var r=n.getFullYear()+"",i=n.getMonth()+1;i=i<10?"0"+i:i;var a=n.getDate();a=a<10?"0"+a:a;var o=n.getHours();o=o<10?"0"+o:o+"";var c=n.getMinutes();c=c<10?"0"+c:c+"";var u=n.getSeconds();u=u<10?"0"+u:u+"";var d=t.replace(/y/g,r);return d=(d=(d=(d=(d=(d=d.replace(/M/g,i)).replace(/d/g,a)).replace(/h/g,o)).replace(/m/g,c)).replace(/s/g,u)).replace(/w/g,f[n.getDay()])}};return t}]);var f=["周日","周一","周二","周三","周四","周五","周六"]}(),angular.module("angularjs.utils").factory("MyLocalDataService",["$log",function(n){n.info("MyLocalDataService init...");var r={put:function(e,t){n.debug("MyLocalDataService.put ",e,t),localStorage.setItem(e,t)},get:function(e){return n.debug("MyLocalDataService.get ",e),localStorage.getItem(e)},remove:function(e){n.debug("MyLocalDataService.remove ",e),localStorage.removeItem(e)},putJson:function(e,t){try{r.put(e,JSON.stringify(t))}catch(e){n.debug("MyLocalDataService putJson ex;",e.message)}},getJson:function(e){var t=r.get(e)||"";if(""===t)return t;try{return JSON.parse(t)}catch(e){return n.debug("MyLocalDataService getJson ex;",e.message),""}},putSession:function(e,t){n.debug("MyLocalDataService.putSession ",e,t),sessionStorage.setItem(e,t)},getSession:function(e){return n.debug("MyLocalDataService.getSession ",e),sessionStorage.getItem(e)},removeSession:function(e){n.debug("MyLocalDataService.removeSession ",e),sessionStorage.removeItem(e)},putSessionJson:function(e,t){try{r.putSession(e,JSON.stringify(t))}catch(e){n.debug("MyLocalDataService putSessionJson ex;",e.message)}},getSessionJson:function(e){var t=r.getSession(e)||"";if(""===t)return{};try{return JSON.parse(t)}catch(e){return n.debug("MyLocalDataService getSessionJson ex;",e.message),{}}}};return r}]),angular.module("angularjs.utils").factory("MyUtilService",["$log","$sce","$location","$timeout",function(e,n,r,o){e.info("MyUtilService init...");var u={trim:function(e){return u.empty(e)?"":e.replace(/(^[\s]*)|([\s]*$)/g,"")},empty:function(e){return!e||0===e.length},isInt:function(e){return/^\d+$/.test(e)&&parseInt(e,10)+""===e},replaceAll:function(e,t,n){return e.split(t).join(n)},getUuid:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return r},getUuid32:function(){return u.replaceAll(u.getUuid(),"-","")},redirect:function(e,t){t||(t={}),r.search(t),o(function(){r.path(e)})},jsonToDeeplink:function(e){var t="";for(var n in e)t+="&"+n+"="+e[n];return t.substr(1)},trustAsHtml:function(e,t){return t&&(e=(e=(e=e.replace(/\r\n/g,"<br />")).replace(/\r/g,"<br />")).replace(/\n/g,"<br />")),n.trustAsHtml(e)},isMobile:function(){return u.getBrowserInfo().versions.mobile},getBrowserInfo:function(){var e,t,n={versions:(e=navigator.userAgent,t={trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1===e.indexOf("KHTML"),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),iPhone:-1<e.indexOf("iPhone")||-1<e.indexOf("Mac"),webApp:-1===e.indexOf("Safari")},t.mobile=t.iPhone||t.android||t.webApp,t),language:(navigator.browserLanguage||navigator.language).toLowerCase()};return n},scrollTo:function(t){o(function(){var e=r.hash();r.hash(t),$anchorScroll(),r.hash(e)},10)}},f={key:"color: red;",string:"color: fuchsia;",number:"color: green;",boolean:"color: maroon;",other:"color: maroon;"};function l(){}return u.formatJson=function(e,t){var n=JSON.stringify(e,void 0,4);return t?u.jsonSyntaxHighlight(n):n},u.jsonSyntaxHighlight=function(e){return e=(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="other"),'<span style="'+f[t]+'">'+e+"</span>"})},l.rhex=function(e){var t="0123456789abcdef";for(str="",j=0;j<=3;j++)str+=t.charAt(e>>8*j+4&15)+t.charAt(e>>8*j&15);return str},l.str2blks_MD5=function(e){for(nblk=1+(e.length+8>>6),blks=new Array(16*nblk),i=0;i<16*nblk;i++)blks[i]=0;for(i=0;i<e.length;i++)blks[i>>2]|=e.charCodeAt(i)<<i%4*8;return blks[i>>2]|=128<<i%4*8,blks[16*nblk-2]=8*e.length,blks},l.add=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},l.rol=function(e,t){return e<<t|e>>>32-t},l.cmn=function(e,t,n,r,i,a){return l.add(l.rol(l.add(l.add(t,e),l.add(r,a)),i),n)},l.ff=function(e,t,n,r,i,a,o){return l.cmn(t&n|~t&r,e,t,i,a,o)},l.gg=function(e,t,n,r,i,a,o){return l.cmn(t&r|n&~r,e,t,i,a,o)},l.hh=function(e,t,n,r,i,a,o){return l.cmn(t^n^r,e,t,i,a,o)},l.ii=function(e,t,n,r,i,a,o){return l.cmn(n^(t|~r),e,t,i,a,o)},l.calcMD5=function(e){for(x=l.str2blks_MD5(e),a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=l.ff(a,b,c,d,x[i+0],7,-680876936),d=l.ff(d,a,b,c,x[i+1],12,-389564586),c=l.ff(c,d,a,b,x[i+2],17,606105819),b=l.ff(b,c,d,a,x[i+3],22,-1044525330),a=l.ff(a,b,c,d,x[i+4],7,-176418897),d=l.ff(d,a,b,c,x[i+5],12,1200080426),c=l.ff(c,d,a,b,x[i+6],17,-1473231341),b=l.ff(b,c,d,a,x[i+7],22,-45705983),a=l.ff(a,b,c,d,x[i+8],7,1770035416),d=l.ff(d,a,b,c,x[i+9],12,-1958414417),c=l.ff(c,d,a,b,x[i+10],17,-42063),b=l.ff(b,c,d,a,x[i+11],22,-1990404162),a=l.ff(a,b,c,d,x[i+12],7,1804603682),d=l.ff(d,a,b,c,x[i+13],12,-40341101),c=l.ff(c,d,a,b,x[i+14],17,-1502002290),b=l.ff(b,c,d,a,x[i+15],22,1236535329),a=l.gg(a,b,c,d,x[i+1],5,-165796510),d=l.gg(d,a,b,c,x[i+6],9,-1069501632),c=l.gg(c,d,a,b,x[i+11],14,643717713),b=l.gg(b,c,d,a,x[i+0],20,-373897302),a=l.gg(a,b,c,d,x[i+5],5,-701558691),d=l.gg(d,a,b,c,x[i+10],9,38016083),c=l.gg(c,d,a,b,x[i+15],14,-660478335),b=l.gg(b,c,d,a,x[i+4],20,-405537848),a=l.gg(a,b,c,d,x[i+9],5,568446438),d=l.gg(d,a,b,c,x[i+14],9,-1019803690),c=l.gg(c,d,a,b,x[i+3],14,-187363961),b=l.gg(b,c,d,a,x[i+8],20,1163531501),a=l.gg(a,b,c,d,x[i+13],5,-1444681467),d=l.gg(d,a,b,c,x[i+2],9,-51403784),c=l.gg(c,d,a,b,x[i+7],14,1735328473),b=l.gg(b,c,d,a,x[i+12],20,-1926607734),a=l.hh(a,b,c,d,x[i+5],4,-378558),d=l.hh(d,a,b,c,x[i+8],11,-2022574463),c=l.hh(c,d,a,b,x[i+11],16,1839030562),b=l.hh(b,c,d,a,x[i+14],23,-35309556),a=l.hh(a,b,c,d,x[i+1],4,-1530992060),d=l.hh(d,a,b,c,x[i+4],11,1272893353),c=l.hh(c,d,a,b,x[i+7],16,-155497632),b=l.hh(b,c,d,a,x[i+10],23,-1094730640),a=l.hh(a,b,c,d,x[i+13],4,681279174),d=l.hh(d,a,b,c,x[i+0],11,-358537222),c=l.hh(c,d,a,b,x[i+3],16,-722521979),b=l.hh(b,c,d,a,x[i+6],23,76029189),a=l.hh(a,b,c,d,x[i+9],4,-640364487),d=l.hh(d,a,b,c,x[i+12],11,-421815835),c=l.hh(c,d,a,b,x[i+15],16,530742520),b=l.hh(b,c,d,a,x[i+2],23,-995338651),a=l.ii(a,b,c,d,x[i+0],6,-198630844),d=l.ii(d,a,b,c,x[i+7],10,1126891415),c=l.ii(c,d,a,b,x[i+14],15,-1416354905),b=l.ii(b,c,d,a,x[i+5],21,-57434055),a=l.ii(a,b,c,d,x[i+12],6,1700485571),d=l.ii(d,a,b,c,x[i+3],10,-1894986606),c=l.ii(c,d,a,b,x[i+10],15,-1051523),b=l.ii(b,c,d,a,x[i+1],21,-2054922799),a=l.ii(a,b,c,d,x[i+8],6,1873313359),d=l.ii(d,a,b,c,x[i+15],10,-30611744),c=l.ii(c,d,a,b,x[i+6],15,-1560198380),b=l.ii(b,c,d,a,x[i+13],21,1309151649),a=l.ii(a,b,c,d,x[i+4],6,-145523070),d=l.ii(d,a,b,c,x[i+11],10,-1120210379),c=l.ii(c,d,a,b,x[i+2],15,718787259),b=l.ii(b,c,d,a,x[i+9],21,-343485551),a=l.add(a,olda),b=l.add(b,oldb),c=l.add(c,oldc),d=l.add(d,oldd);return l.rhex(a)+l.rhex(b)+l.rhex(c)+l.rhex(d)},u.md5=function(e){return l.calcMD5(e)},u}]),function(){var e=angular.module("angularjs.utils");e.directive("focusOn",["$log",function(i){return i.debug("directive focus-on..."),{scope:{focusOn:"@"},link:function(e,n,t){i.debug("directive focus-on element:",n,t);var r=e.$watch("focusOn",function(e,t){if(i.debug("directive focus-on watch:",e,t),1==e||"true"==e)try{n[0].focus()}catch(e){i.debug("directive focus error:",e)}});e.$on("$destroy",function(){i.debug("directive focus-on destroy..."),r()})}}}]),e.directive("showTime",["$log","MyUtilService","MyDateService",function(u,n,d){return u.debug("directive show-time..."),{scope:{showTime:"@"},link:function(e,r,t){u.debug("directive show-time element:",r,t);var i=r.attr("show-time-format"),a=r.attr("show-time-watch");n.empty(i)&&(i="y-M-d");var o=!1,c=e.$watch("showTime",function(e,t){if(u.debug("directive show-time watch:",e,t),e&&""!==e){try{var n=parseInt(e);r.html(d.formatDate(n,i))}catch(e){u.debug("directive show-time error:",e)}"watch"!=a&&(c(),o=!0)}});e.$on("$destroy",function(){u.debug("directive show-time destroy..."),o||c()})}}}]),e.directive("fixedTop",["$log",function(i){return i.debug("directive fixed-top..."),{link:function(e,t,n){i.debug("directive fixed-top element:",t,n);var r=t.height();i.debug("directive fixed-top height:",r),angular.element(t[0].nextElementSibling).css("margin-top",r+"px"),e.$on("$destroy",function(){i.debug("directive fixed-top destroy...")})}}}]),e.directive("fixedBottom",["$log",function(i){return i.debug("directive fixed-bottom..."),{link:function(e,t,n){i.debug("directive fixed-bottom element:",t);var r=t.height();i.debug("directive fixed-bottom height:",r),angular.element(t[0].previousElementSibling).css("margin-bottom",r+"px"),e.$on("$destroy",function(){i.debug("directive fixed-bottom destroy...")})}}}]),e.directive("fixedToNext",["$log",function(a){return a.debug("directive fixed-to-next..."),{link:function(e,t,n){a.debug("directive fixed-to-next element:",t,n);var r=t.offset().top,i=angular.element(t[0].nextElementSibling).offset().top;t.height(i-r),a.debug("directive fixed-to-next top:",r,i),e.$on("$destroy",function(){a.debug("directive fixed-to-next destroy...")})}}}])}();
//# sourceMappingURL=angularjs.utils-1.0.1.min.js.map
